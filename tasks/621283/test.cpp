#include "solution.cpp"  // Include the wrapper file dynamically
#include <gtest/gtest.h>  // Include GoogleTest

TEST(SolutionTest, TestCases) {
    EXPECT_EQ(solution(3, 2, {-1, -1, 2}), 4);
    EXPECT_EQ(solution(3, 1, {-1, -1, 1}), 1);
    EXPECT_EQ(solution(3, 1, {-1, -1, 1}), 1);
    EXPECT_EQ(solution(17, 27, {257, 320, 676, 1136, 2068, 2505, 2639, 4225, 4951, 5786, 7677, 7697, 7851, 8337, 8429, 8469, 9343}), 81852);
    EXPECT_EQ(solution(69, 28, {-9822, -9264, -9253, -9221, -9139, -9126, -9096, -8981, -8521, -8313, -8257, -8253, -7591, -7587, -7301, -7161, -7001, -6847, -6441, -6241, -5949, -5896, -5713, -5692, -5644, -5601, -5545, -5525, -5331, -5253, -5041, -5000, -4951, -4855, -4384, -4293, -4251, -4001, -3991, -3762, -3544, -3481, -3261, -2983, -2882, -2857, -2713, -2691, -2681, -2653, -2221, -2043, -2011, -1997, -1601, -1471, -1448, -1363, -1217, -1217, -1129, -961, -926, -801, -376, -327, -305, -174, -91}), 102443);
    EXPECT_EQ(solution(12, 28, {-6652, -6621, -6471, -5559, -5326, -4551, -4401, -4326, -3294, -1175, -1069, -43}), 49488);
    EXPECT_EQ(solution(78, 13, {-9961, -9922, -9817, -9813, -9521, -9368, -9361, -9207, -9153, -9124, -9008, -8981, -8951, -8911, -8551, -8479, -8245, -8216, -7988, -7841, -7748, -7741, -7734, -7101, -6846, -6804, -6651, -6526, -6519, -6463, -6297, -6148, -6090, -5845, -5209, -5201, -5161, -5061, -4537, -4529, -4433, -4370, -4266, -4189, -4125, -3945, -3843, -3777, -3751, -3476, -3461, -3279, -3205, -3001, -2889, -2761, -2661, -2521, -2481, -2305, -2278, -2269, -2225, -1648, -1524, -1476, -1353, -1097, -867, -785, -741, -711, -692, -440, -401, -225, -65, -41}), -147832);
    EXPECT_EQ(solution(4, 1, {218, 3441, 4901, 7601}), 15725);
    EXPECT_EQ(solution(73, 26, {-8497, -8363, -7603, -7388, -6830, -6827, -6685, -6389, -6237, -6099, -6013, -5565, -5465, -4965, -4947, -4201, -3851, -3793, -3421, -3410, -3201, -3169, -3156, -2976, -2701, -2623, -2321, -2169, -1469, -1221, -950, -926, -9, 47, 236, 457, 773, 1321, 1485, 1545, 1671, 1736, 2014, 2137, 2174, 2301, 2625, 3181, 3536, 3851, 4041, 4685, 4981, 4987, 5145, 5163, 5209, 5249, 6011, 6337, 6790, 7254, 7361, 7407, 7969, 7982, 8083, 8251, 8407, 8735, 9660, 9855, 9957}), 315919);
    EXPECT_EQ(solution(53, 5, {-9821, -9429, -9146, -8973, -8807, -8801, -8321, -7361, -7222, -7161, -6913, -5961, -4877, -4756, -4753, -4661, -3375, -3031, -2950, -2661, -2161, -2041, -1111, -1071, -905, -697, -397, 323, 772, 1617, 1752, 2736, 2737, 3201, 3465, 4029, 4121, 4463, 4561, 4637, 4814, 6119, 6610, 6641, 6961, 7217, 7523, 8045, 8610, 8915, 9004, 9265, 9576}), 92703);
    EXPECT_EQ(solution(1, 1, {0}), 0);
    EXPECT_EQ(solution(1, 1, {10000}), -10000);
    EXPECT_EQ(solution(1, 2, {-1}), -1);
    EXPECT_EQ(solution(2, 1, {0, 1}), 1);
    EXPECT_EQ(solution(2, 2, {-1, 0}), 1);
    EXPECT_EQ(solution(5, 6, {-3, -2, -1, 5, 6}), 15);
    EXPECT_EQ(solution(3, 3, {-50, -10, 30}), 70);
    EXPECT_EQ(solution(4, 4, {-100, -90, -80, 1}), 269);
    EXPECT_EQ(solution(4, 3, {-3, -2, 1, 2}), 6);
    EXPECT_EQ(solution(6, 4, {-6, -3, -2, 1, 2, 3}), 15);
    EXPECT_EQ(solution(5, 6, {-10, -9, -8, 1, 2}), 28);
    EXPECT_EQ(solution(1, 2, {1}), 1);
    EXPECT_EQ(solution(2, 2, {-1, 3}), 2);
    EXPECT_EQ(solution(4, 7, {-3, -2, 1, 6}), 10);
    EXPECT_EQ(solution(4, 3, {-7, -6, 1, 5}), 17);
    EXPECT_EQ(solution(4, 4, {-5, -1, 1, 2}), 9);
}